{"version":3,"sources":["webpack:///./src/modules/ModelManagement/view/InoutVarsEdit.vue?88bb","webpack:///src/modules/ModelManagement/view/InoutVarsEdit.vue","webpack:///./src/modules/ModelManagement/view/InoutVarsEdit.vue?474a","webpack:///./src/modules/ModelManagement/view/InoutVarsEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","width","title","editMode","visible","on","ok","handleOk","cancel","handleCancel","form","label","directives","name","rawName","value","validateFirst","rules","required","message","validator","varsUniquedValidator","pattern","expression","placeholder","_v","autosize","valuePropName","_withStripped","getRecordFields","vm","$form","createFormField","record","defvalue","desc","saved","view_InoutVarsEditvue_type_script_lang_js_","props","existVars","type","Array","default","data","computed","hasOwnProperty","watch","updateFields","created","_this","createForm","mapPropsToFields","methods","_this2","validateFields","err","getFieldsValue","$emit","objectSpread_default","clear","rule","callback","indexOf","Error","load","$set","_this3","$nextTick","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"static/js/11.e918696cb9069b83ef66.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"a-modal\",\n    {\n      attrs: {\n        width: 600,\n        title: _vm.editMode ? \"编辑变量\" : \"新增变量\",\n        visible: _vm.visible\n      },\n      on: { ok: _vm.handleOk, cancel: _vm.handleCancel }\n    },\n    [\n      _c(\n        \"a-form\",\n        { attrs: { form: _vm.form } },\n        [\n          _c(\n            \"a-form-item\",\n            { attrs: { label: \"变量名称\" } },\n            [\n              _c(\"a-input\", {\n                directives: [\n                  {\n                    name: \"decorator\",\n                    rawName: \"v-decorator\",\n                    value: [\n                      \"name\",\n                      {\n                        validateFirst: true,\n                        rules: [\n                          { required: true, message: \"请输入变量名称\" },\n                          {\n                            validator: _vm.varsUniquedValidator,\n                            message: \"变量名称重复\"\n                          },\n                          {\n                            pattern: /^[A-Za-z]+$/,\n                            message: \"变量名称请遵循规范命名\"\n                          }\n                        ]\n                      }\n                    ],\n                    expression:\n                      \"[\\n          'name', \\n          {\\n            validateFirst: true,\\n            rules: [\\n              { required: true, message: '请输入变量名称'}, \\n              { validator: varsUniquedValidator, message: '变量名称重复' },\\n              { pattern: /^[A-Za-z]+$/, message: '变量名称请遵循规范命名' },\\n            ]\\n          }\\n        ]\"\n                  }\n                ],\n                attrs: { placeholder: \"请输入变量名称\" }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"a-form-item\",\n            { attrs: { label: \"默认值\" } },\n            [\n              _c(\"a-input-number\", {\n                directives: [\n                  {\n                    name: \"decorator\",\n                    rawName: \"v-decorator\",\n                    value: [\n                      \"defvalue\",\n                      { rules: [{ required: true, message: \"请输入默认值\" }] }\n                    ],\n                    expression:\n                      \"[\\n          'defvalue',\\n          {rules: [{ required: true, message: '请输入默认值'}]}\\n        ]\"\n                  }\n                ],\n                attrs: { placeholder: \"请输入默认值\" }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"a-form-item\",\n            { attrs: { label: \"变量描述\" } },\n            [\n              _c(\"a-textarea\", {\n                directives: [\n                  {\n                    name: \"decorator\",\n                    rawName: \"v-decorator\",\n                    value: [\"desc\"],\n                    expression: \"[\\n          'desc', \\n        ]\"\n                  }\n                ],\n                attrs: { autosize: \"\", placeholder: \"请输入变量描述\" }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"a-form-item\",\n            { attrs: { label: \"是否保存\" } },\n            [\n              _c(\"a-checkbox\", {\n                directives: [\n                  {\n                    name: \"decorator\",\n                    rawName: \"v-decorator\",\n                    value: [\"saved\", { valuePropName: \"checked\" }],\n                    expression:\n                      \"[\\n          'saved',\\n          { valuePropName: 'checked' }\\n        ]\"\n                  }\n                ]\n              })\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n  <a-modal\n    :width=\"600\"\n    :title=\"editMode ? '编辑变量' : '新增变量'\"\n    :visible=\"visible\"\n    @ok=\"handleOk\"\n    @cancel=\"handleCancel\"\n  >\n    <a-form :form=\"form\">\n      <a-form-item\n        label=\"变量名称\"\n      >\n        <a-input\n          v-decorator=\"[\n            'name', \n            {\n              validateFirst: true,\n              rules: [\n                { required: true, message: '请输入变量名称'}, \n                { validator: varsUniquedValidator, message: '变量名称重复' },\n                { pattern: /^[A-Za-z]+$/, message: '变量名称请遵循规范命名' },\n              ]\n            }\n          ]\"\n          placeholder=\"请输入变量名称\"\n        />\n      </a-form-item>\n\n      <a-form-item\n        label=\"默认值\"\n      >\n        <a-input-number\n          v-decorator=\"[\n            'defvalue',\n            {rules: [{ required: true, message: '请输入默认值'}]}\n          ]\"\n          placeholder=\"请输入默认值\"\n        >\n        </a-input-number>\n      </a-form-item>\n      <a-form-item\n        label=\"变量描述\"\n      >\n        <a-textarea\n          autosize\n          v-decorator=\"[\n            'desc', \n          ]\"\n          placeholder=\"请输入变量描述\"\n        />\n      </a-form-item>\n      <a-form-item\n        label=\"是否保存\"\n      >\n        <a-checkbox \n          v-decorator=\"[\n            'saved',\n            { valuePropName: 'checked' }\n          ]\"\n        >\n        </a-checkbox>\n      </a-form-item>\n    </a-form>\n  </a-modal>\n</template>\n\n<script>\nimport { split2array } from '@/lib/util';\n\n/**\n * 构建表单字段映射\n */\nfunction getRecordFields (vm) {\n  return {\n    name: vm.$form.createFormField({value: vm.record.name}),\n    defvalue: vm.$form.createFormField({value: vm.record.defvalue}),\n    desc: vm.$form.createFormField({value: vm.record.desc}),\n    saved: vm.$form.createFormField({value: vm.record.saved}),\n  }\n}\nexport default {\n  /**\n   * 模型变量的编辑窗口\n   */\n  name: 'InoutVarsEdit',\n  props: {\n    /**\n     * 已有端口名称集合\n     */\n    existVars: {\n      type: Array,\n      default: () => ([])\n    },\n  },\n  data () {\n    return {\n      /**\n       * 表单数据\n       */\n      record: {},\n      /**\n       * 弹出窗是否可见，默认`false`\n       */\n      visible: false,\n    }\n  },\n  computed: {\n    /**\n     * 动态标题，若传入数据为空，则表示**新增**，反之表示**编辑**\n     */\n    editMode () {\n      return this.record.hasOwnProperty('name');\n    }\n  },\n  watch: {\n    record () {\n      this.form.updateFields(getRecordFields(this));\n    }\n  },\n  created () {\n    this.form = this.$form.createForm(this, {\n      mapPropsToFields: () => getRecordFields(this)\n    });\n  },\n  \n  methods: {\n    /**\n     * 确认\n     */\n    handleOk () {\n      this.form.validateFields(err => {\n        if (!err) {\n          const data = this.form.getFieldsValue();\n          this.visible = false;\n          this.$emit('update', {...this.record, ...data});\n          this.clear();\n        }\n      });\n    },\n    /**\n     * 取消\n     */\n    handleCancel () {\n      this.visible = false;\n      this.clear();\n    },\n    /**\n     * 验证端口唯一性，不允许重复，且必须为英文\n     */\n    varsUniquedValidator (rule, value, callback) {\n      // 新增端口，发现重名，则提出错误信息\n      if (~this.existVars.indexOf(value) && value !== this.record.name) {\n        callback(new Error());\n      }\n      callback();\n    },\n    /**\n     * 动态加载外部数据\n     */\n    load (data) {\n      this.$set(this, 'record', {...data})\n      this.visible = true;\n    },\n    /**\n     * 清除表单数据\n     */\n    clear () {\n      this.$nextTick(() => {\n        this.$set(this, 'record', {});\n      })\n    },\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/happypack/loader.js?id=happybabel!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InoutVarsEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/happypack/loader.js?id=happybabel!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InoutVarsEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InoutVarsEdit.vue?vue&type=template&id=6a2c6659&\"\nimport script from \"./InoutVarsEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./InoutVarsEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/loong/gitlab/vsee-cloud/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('6a2c6659', component.options)\n    } else {\n      api.reload('6a2c6659', component.options)\n    }\n    module.hot.accept(\"./InoutVarsEdit.vue?vue&type=template&id=6a2c6659&\", function () {\n      api.rerender('6a2c6659', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/modules/ModelManagement/view/InoutVarsEdit.vue\"\nexport default component.exports"],"sourceRoot":""}