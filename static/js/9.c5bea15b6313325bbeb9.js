(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{jN0v:function(e,n,t){"use strict";t.r(n);function a(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",[t("a-button",{attrs:{disabled:!e.selectedCells},on:{click:e.handleRemoveSelected}},[e._v("\n      删除\n    ")]),e._v(" "),t("a-button",{attrs:{disabled:!e.undoable},on:{click:e.handleUndo}},[e._v("\n      撤销\n    ")]),e._v(" "),t("a-button",{attrs:{disabled:!e.redoable},on:{click:e.handleRedo}},[e._v("\n      重做\n    ")])],1),e._v(" "),t("div",{ref:"mx-container"})])}a._withStripped=!0;var d=t("cvnM"),r=t("sNsB"),i={props:{xml:{type:String,default:""}},data:function(){return{graph:null,undoManager:null}},computed:{selectedCells:function(){return this.graph&&this.graph.getSelectionCount()},undoable:function(){var e=this.graph,n=this.undoManager;return e&&n&&n.indexOfNextAdd&&n.history.length},redoable:function(){var e=this.graph,n=this.undoManager;return e&&n&&n.indexOfNextAdd!==n.history.length}},mounted:function(){this.container=this.$refs["mx-container"],this.initGraph(),this.listenEvent()},methods:{initGraph:function(){var e=this.graph=new d.a.mxGraph(this.container),n=d.a.mxUtils.parseXml(this.xml);if(null!=n.documentElement&&"mxGraphModel"===n.documentElement.nodeName){var t=new d.a.mxCodec(n),a=n.documentElement;t.decode(a,e.getModel())}this.configuration(),this.addUndoManager(),window.graph=e,window.mx=d.a},configuration:function(){var e=this.graph;e.setConnectable(!0),e.setAllowLoops(!1),e.setMultigraph(!1),e.setCellsResizable(!1),e.setAllowDanglingEdges(!1),e.setPortsEnabled(!1),d.a.mxGraphHandler.prototype.guidesEnabled=!0,e.setEnabled(!0)},listenEvent:function(){var a=this;this.graph.dblClick=function(e,n){var t=this;t.isEnabled()&&!d.a.mxEvent.isConsumed(e)&&t.isCellEditable(n)&&t.model.isVertex(n)&&a.$emit("event:dblClick",t,n,e)}},addUndoManager:function(){function e(e,n){t.undoableEditHappened(n.getProperty("edit"))}var n=this.graph,t=this.undoManager=new d.a.mxUndoManager;n.getModel().addListener(d.a.mxEvent.UNDO,e),n.getView().addListener(d.a.mxEvent.UNDO,e),n.getModel().addListener(d.a.mxEvent.REDO,e),n.getView().addListener(d.a.mxEvent.REDO,e),this.undoManager=t,window.undoManager=t},addGraph:function(e){var n=this.graph,t=d.a.mxUtils.parseXml(e),a=new d.a.mxCodec(t),i=t.getElementsByTagName("mxCell");n.addCells(Object(r.a)(function(e){return a.decode(e)},i))},loadGraph:function(e){this.clearGraph(),this.addGraph(e)},clearGraph:function(){var e=this.graph;e.removeCells(e.getChildVertices(e.getDefaultParent()))},getModel:function(){return this.graph.getModel()},getXml:function(){var e=new d.a.mxCodec(d.a.mxUtils.createXmlDocument()).encode(this.graph.getModel());return d.a.mxUtils.getXml(e)},add:function(e){e(this.graph)},handleRemoveSelected:function(){var e=this.graph,n=e.getSelectionCells();e.removeCells(n)},handleUndo:function(){var e=this.undoManager;e&&e.undo()},handleRedo:function(){var e=this.undoManager;e&&e.redo()}}},o=t("KHd+"),l=Object(o.a)(i,a,[],!1,null,null,null);l.options.__file="src/components/MxGraph/XmlGraph.vue";n.default=l.exports}}]);
//# sourceMappingURL=9.c5bea15b6313325bbeb9.js.map