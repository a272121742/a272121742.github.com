{"version":3,"sources":["webpack:///./src/modules/ModelManagement/view/InoutVars.vue?4758","webpack:///src/modules/ModelManagement/view/InoutVars.vue","webpack:///./src/modules/ModelManagement/view/InoutVars.vue?11ab","webpack:///./src/modules/ModelManagement/view/InoutVars.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","exist-vars","existVars","on","update","inoutVarsUpdate","_v","row-key","r","i","columns","data-source","data","pagination","scroll","y","size","bordered","scopedSlots","_u","key","fn","text","record","index","_s","editable","click","handleEdit","type","handleRemove","undefined","slot","handleAdd","_withStripped","InoutVarsvue_type_script_lang_js_","name","components","InoutVarsEdit","__webpack_require__","e","then","bind","props","Boolean","default","dataSource","Array","selectedRow","computed","Object","map","prop","watch","immediate","handler","console","log","refresh","created","methods","$set","toConsumableArray_default","updated","$emit","push","$refs","editForm","load","$delete","title","dataIndex","customRender","width","slots","view_InoutVarsvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"static/js/10.309077b0fe48c806c3b9.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    [\n      _c(\"inout-vars-edit\", {\n        ref: \"editForm\",\n        attrs: { \"exist-vars\": _vm.existVars },\n        on: { update: _vm.inoutVarsUpdate }\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"a-table\",\n        {\n          attrs: {\n            \"row-key\": function(r, i) {\n              return i\n            },\n            columns: _vm.columns,\n            \"data-source\": _vm.data,\n            pagination: false,\n            scroll: { y: 240 },\n            size: \"small\",\n            bordered: \"\"\n          },\n          scopedSlots: _vm._u(\n            [\n              {\n                key: \"serial\",\n                fn: function(text, record, index) {\n                  return [_vm._v(\"\\n      \" + _vm._s(index + 1) + \"\\n    \")]\n                }\n              },\n              {\n                key: \"operation\",\n                fn: function(text, record, index) {\n                  return _vm.editable\n                    ? [\n                        _c(\n                          \"a\",\n                          {\n                            on: {\n                              click: function() {\n                                return _vm.handleEdit(index, record)\n                              }\n                            }\n                          },\n                          [_c(\"a-icon\", { attrs: { type: \"edit\" } })],\n                          1\n                        ),\n                        _vm._v(\" \"),\n                        _c(\n                          \"a\",\n                          {\n                            on: {\n                              click: function() {\n                                return _vm.handleRemove(index)\n                              }\n                            }\n                          },\n                          [_c(\"a-icon\", { attrs: { type: \"delete\" } })],\n                          1\n                        )\n                      ]\n                    : undefined\n                }\n              }\n            ],\n            null,\n            true\n          )\n        },\n        [\n          _vm._v(\" \"),\n          _c(\"template\", { slot: \"operationTitle\" }, [\n            _vm.editable\n              ? _c(\n                  \"a\",\n                  { on: { click: _vm.handleAdd } },\n                  [_c(\"a-icon\", { attrs: { type: \"plus\" } })],\n                  1\n                )\n              : _c(\"div\", [_vm._v(\"\\n        操作\\n      \")])\n          ])\n        ],\n        2\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <inout-vars-edit\n      ref=\"editForm\"\n      :exist-vars=\"existVars\"\n      @update=\"inoutVarsUpdate\"\n    ></inout-vars-edit>\n    <a-table\n      :row-key=\"(r, i) => i\"\n      :columns=\"columns\"\n      :data-source=\"data\"\n      :pagination=\"false\"\n      :scroll=\"{ y: 240 }\"\n      size=\"small\"\n      bordered\n    >\n      <!-- 数字标记 -->\n      <template\n        slot=\"serial\"\n        slot-scope=\"text, record, index\"\n      >\n        {{ index + 1 }}\n      </template>\n      <!-- 自定义标题 -->\n      <template\n        slot=\"operationTitle\"\n      >\n        <a\n          v-if=\"editable\"\n          @click=\"handleAdd\"\n        ><a-icon type=\"plus\" /></a>\n        <div v-else>\n          操作\n        </div>\n      </template>\n      \n      <template\n        v-if=\"editable\"\n        slot=\"operation\"\n        slot-scope=\"text, record, index\"\n      >\n        <a\n          @click=\"() => handleEdit(index, record)\"\n        ><a-icon type=\"edit\" /></a>\n        <a\n          @click=\"() => handleRemove(index)\"\n        ><a-icon type=\"delete\" /></a>\n      </template>\n    </a-table>\n  </div>\n</template>\n\n<script>\nimport { pipe, clone, partialRight, keys, map, prop, move, sortBy } from 'ramda';\nimport { clearObserver, string2json, map2list, list2map, string2array } from '@lib/util';\n/**\n * 模型变量的表格组件\n * 组件模式：\n *  1. 外部将字符串数据传入组件内部，渲染成数组\n *  2. 数组列表进行增删改的操作后，触发上层组件的`update`事件\n */\nexport default {\n  name: 'InoutVars',\n  components: {\n    InoutVarsEdit: () => import('./InoutVarsEdit.vue')\n  },\n  props: {\n    /**\n     * 是否可编辑，默认false\n     */\n    editable: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 传入的标准列表数据源，无需像上面一样转换\n     */\n    dataSource: {\n      type: Array,\n      default: () => ([])\n    },\n  },\n  data () {\n    return {\n      // 表格列信息\n      columns: columns,\n      // 表格数据\n      data: [],\n      // 操作行\n      selectedRow: -1\n    }\n  },\n  computed: {\n    // 计算已经存在的变量\n    existVars () {\n      return map(prop('name'), this.data);\n    },\n  },\n  watch: {\n    dataSource: {\n      immediate: true,\n      handler () {\n        console.log('数据变化');\n        this.refresh();\n      }\n    }\n  },\n  created () {\n\n  },\n  methods: {\n    /**\n     * 数据刷新，数据由上层组件字符串向下传递获得\n     */\n    refresh () {\n      this.$set(this, 'data', [...this.dataSource]);\n    },\n    /**\n     * 内部数据更新结束\n     */\n    updated () {\n      // 将数据发送给上层组件\n      this.$emit('update', [...this.data]);\n    },\n    /**\n     * 端口发生变化时，调用此方法：\n     * 1. 端口新增时被调用，`this.selectedRow = -1`;\n     * 2. 端口修改时被调用，`this.selectedRow > -1`;\n     */\n    inoutVarsUpdate (record) {\n      ~this.selectedRow ? \n        this.$set(this.data, this.selectedRow, record) : \n        this.data.push(record);\n      this.updated();\n    },\n    // UI: 添加操作\n    handleAdd () {\n      this.selectedRow = -1;\n      this.$refs.editForm.load({});\n    },\n    // UI: 启用编辑模式\n    handleEdit (index, record) {\n      this.selectedRow = index;\n      this.$refs.editForm.load(record);\n    },\n    // UI: 删除操作\n    handleRemove (index) {\n      this.$delete(this.data, index);\n      this.updated();\n    },\n  }\n};\n// 列信息\nconst columns = [{\n  title: '#',\n  dataIndex: 'serial',\n  scopedSlots: { customRender: 'serial' },\n  width: 24,\n},{\n  title: '名称',\n  dataIndex: 'name',\n  scopedSlots: { customRender: 'name' },\n  width: 80,\n}, {\n  title: '默认值',\n  dataIndex: 'defvalue',\n  scopedSlots: { customRender: 'defvalue' },\n  width: 80,\n}, {\n  title: '是否保存',\n  dataIndex: 'saved',\n  scopedSlots: { customRender: 'saved' },\n  width: 80,\n}, {\n  title: '描述',\n  dataIndex: 'desc',\n  scopedSlots: { customRender: 'desc' },\n}, {\n  dataIndex: 'operation',\n  slots: { title: 'operationTitle' },\n  scopedSlots: { customRender: 'operation' },\n  width: 68\n}];\n</script>\n\n<style lang=\"less\" scoped>\n</style>\n","import mod from \"-!../../../../node_modules/happypack/loader.js?id=happybabel!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InoutVars.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/happypack/loader.js?id=happybabel!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InoutVars.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InoutVars.vue?vue&type=template&id=f694e6a2&scoped=true&\"\nimport script from \"./InoutVars.vue?vue&type=script&lang=js&\"\nexport * from \"./InoutVars.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f694e6a2\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/loong/gitlab/vsee-cloud/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('f694e6a2', component.options)\n    } else {\n      api.reload('f694e6a2', component.options)\n    }\n    module.hot.accept(\"./InoutVars.vue?vue&type=template&id=f694e6a2&scoped=true&\", function () {\n      api.rerender('f694e6a2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/modules/ModelManagement/view/InoutVars.vue\"\nexport default component.exports"],"sourceRoot":""}