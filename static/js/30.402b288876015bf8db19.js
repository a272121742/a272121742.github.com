(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{JdnF:function(t,e,n){"use strict";n.r(e);function a(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-row",{attrs:{gutter:8}},[n("a-col",{attrs:{span:6}},[n("a",[n("inout-vars-modal",{ref:"inoutVarsTable",on:{change:e.handleInoutVarsChange}})],1),e._v(" "),n("menu-tree",{attrs:{"data-source":e.treeData,search:!0,"shown-only":""},on:{onSelect:e.selectMenuTreeItem}})],1),e._v(" "),n("a-col",{attrs:{span:18}},[n("a-form",{staticStyle:{"padding-left":"16px"},attrs:{layout:"inline",form:e.form}},[n("a-form-item",{attrs:{label:"仿真起止时间"}},[n("a-slider",{directives:[{name:"decorator",rawName:"v-decorator",value:["startStopTime",{initialValue:[1,7]}],expression:"['startStopTime', {initialValue: [1, 7]}]"}],staticStyle:{width:"280px"},attrs:{"auto-focus":"",range:""}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.startSimulation(e.form)}}},[e._v("\n            启动\n          ")])],1),e._v(" "),n("a-form-item",[n("a-button",{on:{click:function(t){return e.stopSimulation(e.form)}}},[e._v("\n            停止\n          ")])],1)],1),e._v(" "),n("xml-graph",{ref:"graph",attrs:{xml:e.xml},on:{"event:dblClick":e.cellDbClick}})],1)],1),e._v(" "),n("a-row",{staticStyle:{height:"400px"},attrs:{gutter:8}},[n("a-col",{attrs:{span:6}},[n("inout-vars-table",{attrs:{"node-list":e.nodeList},on:{selectOk:e.selectOk,selectCancel:e.selectCancel}})],1),e._v(" "),n("a-col",{attrs:{span:18}},[n("chart-set",{attrs:{"chart-set":e.chartSet}})],1)],1)],1)}a._withStripped=!0;var s=n("MVZn"),o=n.n(s),r=n("ho9+"),c=n("zsV5"),E=n("CKn+"),S=n("n90j"),C=n("e3nE"),l=n("L2JU"),T=n("cvnM"),i=n("8e1d"),m=Object(l.a)("SimulationOperation").mapActions,u=[{year:"1995",value:4.9},{year:"1996",value:6},{year:"1997",value:7},{year:"1998",value:9},{year:"1999",value:13}],L={name:"SimulationDataAnalysis",components:{MenuTree:function(){return n.e(21).then(n.bind(null,"teAA"))},XmlGraph:function(){return n.e(9).then(n.bind(null,"jN0v"))},InoutVarsModal:function(){return n.e(16).then(n.bind(null,"fK9i"))},InoutVarsTable:function(){return n.e(2).then(n.bind(null,"XGvD"))},ChartSet:function(){return n.e(1).then(n.bind(null,"sGbv"))}},props:{id:{type:String,default:""}},data:function(){return{treeData:[],xml:"",nodeList:[],chartSet:{},form:this.$form.createForm(this)}},created:function(){var e=this;this.getAllStdnode().then(function(t){e.treeData=t.result})},methods:o()({},m(["getAllStdnode","getStdnode","addNode"]),{convertPortDefine:Object(r.a)(i.h,Object(i.f)("port")),cellDbClick:function(t,e,n){e&&e.vertex&&e.nodeData&&(this.cell=e,this.$refs.inoutVarsTable.show(e.nodeData.inoutVars))},selectMenuTreeItem:function(t){var e=t.key;this.addStdnode(e)},handleInoutVarsChange:function(t){this.cell.nodeData.inoutVars=t},addStdnode:function(t){var m=this,u=this;this.getStdnode(t).then(function(t){var l=t.result,i=m.convertPortDefine(l.portDefine);m.$refs.graph.add(function(e){var t=e.getModel(),n=e.getDefaultParent();m.configureStylesheet(e),t.beginUpdate();var a,s=Object(c.a)(Object(E.a)("type"),i),o=Object(S.a)(s);try{(a=e.insertVertex(n,null,null,0,0,80,80)).setConnectable(!1),a.nodeData={inoutVars:l.inoutVars},Object(C.a)(function(t){e.insertVertex(a,null,null,"in"!==t.type,o[t.type]--/(s[t.type]+1),16,16,"port;image=/static/editor/images/port_".concat(t.type,".gif"),!0).geometry.offset=new T.a.mxPoint(-8,-8)},i)}finally{e.getModel().endUpdate()}e.setSelectionCell(a);var r={projectID:u.id,nodeID:l.nodeID,name:l.name,inoutVars:l.inoutVars,priority:0,nodetypeID:l.nodeID,enabled:1};u.addNode(r).then(function(t){a.nodeData=t.result,u.nodeList.push(t.result)})})})},configureStylesheet:function(t){var e=new Object;e[T.a.mxConstants.STYLE_SHAPE]=T.a.mxConstants.SHAPE_RECTANGLE,e[T.a.mxConstants.STYLE_PERIMETER]=T.a.mxPerimeter.RectanglePerimeter,e[T.a.mxConstants.STYLE_ALIGN]=T.a.mxConstants.ALIGN_CENTER,e[T.a.mxConstants.STYLE_VERTICAL_ALIGN]=T.a.mxConstants.ALIGN_MIDDLE,e[T.a.mxConstants.STYLE_GRADIENTCOLOR]="#41B9F5",e[T.a.mxConstants.STYLE_FILLCOLOR]="#8CCDF5",e[T.a.mxConstants.STYLE_STROKECOLOR]="#1B78C8",e[T.a.mxConstants.STYLE_FONTCOLOR]="#000000",e[T.a.mxConstants.STYLE_ROUNDED]=!0,e[T.a.mxConstants.STYLE_OPACITY]="80",e[T.a.mxConstants.STYLE_FONTSIZE]="12",e[T.a.mxConstants.STYLE_FONTSTYLE]=0,e[T.a.mxConstants.STYLE_IMAGE_WIDTH]="48",e[T.a.mxConstants.STYLE_IMAGE_HEIGHT]="48",t.getStylesheet().putDefaultVertexStyle(e),(e=new Object)[T.a.mxConstants.STYLE_SHAPE]=T.a.mxConstants.SHAPE_SWIMLANE,e[T.a.mxConstants.STYLE_PERIMETER]=T.a.mxPerimeter.RectanglePerimeter,e[T.a.mxConstants.STYLE_ALIGN]=T.a.mxConstants.ALIGN_CENTER,e[T.a.mxConstants.STYLE_VERTICAL_ALIGN]=T.a.mxConstants.ALIGN_TOP,e[T.a.mxConstants.STYLE_FILLCOLOR]="#FF9103",e[T.a.mxConstants.STYLE_GRADIENTCOLOR]="#F8C48B",e[T.a.mxConstants.STYLE_STROKECOLOR]="#E86A00",e[T.a.mxConstants.STYLE_FONTCOLOR]="#000000",e[T.a.mxConstants.STYLE_ROUNDED]=!0,e[T.a.mxConstants.STYLE_OPACITY]="80",e[T.a.mxConstants.STYLE_STARTSIZE]="30",e[T.a.mxConstants.STYLE_FONTSIZE]="16",e[T.a.mxConstants.STYLE_FONTSTYLE]=1,t.getStylesheet().putCellStyle("group",e),(e=new Object)[T.a.mxConstants.STYLE_SHAPE]=T.a.mxConstants.SHAPE_IMAGE,e[T.a.mxConstants.STYLE_FONTCOLOR]="#774400",e[T.a.mxConstants.STYLE_PERIMETER]=T.a.mxPerimeter.RectanglePerimeter,e[T.a.mxConstants.STYLE_PERIMETER_SPACING]="6",e[T.a.mxConstants.STYLE_ALIGN]=T.a.mxConstants.ALIGN_LEFT,e[T.a.mxConstants.STYLE_VERTICAL_ALIGN]=T.a.mxConstants.ALIGN_MIDDLE,e[T.a.mxConstants.STYLE_FONTSIZE]="10",e[T.a.mxConstants.STYLE_FONTSTYLE]=2,e[T.a.mxConstants.STYLE_IMAGE_WIDTH]="16",e[T.a.mxConstants.STYLE_IMAGE_HEIGHT]="16",t.getStylesheet().putCellStyle("port",e),(e=t.getStylesheet().getDefaultEdgeStyle())[T.a.mxConstants.STYLE_LABEL_BACKGROUNDCOLOR]="#FFFFFF",e[T.a.mxConstants.STYLE_STROKEWIDTH]="2",e[T.a.mxConstants.STYLE_ROUNDED]=!0,e[T.a.mxConstants.STYLE_EDGE]=T.a.mxEdgeStyle.EntityRelation},selectOk:function(t){this.$set(this.chartSet,t,u)},selectCancel:function(t){this.$delete(this.chartSet,t,u)},startSimulation:function(t){console.log("开始仿真"),console.log("获取仿真起止时间",t.getFieldsValue().startStopTime),console.log("获取mxGraph数据",this.$refs.graph.getXml())},stopSimulation:function(){console.log("结束仿真")}})},d=n("KHd+"),_=Object(d.a)(L,a,[],!1,null,null,null);_.options.__file="src/modules/SimulationOperation/view/_SimulationDataAnalysis.vue";e.default=_.exports}}]);
//# sourceMappingURL=30.402b288876015bf8db19.js.map